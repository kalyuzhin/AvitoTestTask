# Flask API

В данном проекте я использовал язык Python и фреймворк Flask, чтобы реализовать задание.

## Структура

Файл run.py запускает проект, в пакете avito находится бизнес-логика проекта. Также в проекте присутствует Dockerfile,
файл с зависимостями, deployment.yml и service.yml для Kubernetes.

## Использование

API работает по адресу: https://cnrprod1725782375-team-77723-33253.avito2024.codenrock.com

Все работающие эндпоинты совпадают с требуемыми в задании (директория задание).
То есть для примера можно обратиться к https://cnrprod1725782375-team-77723-33253.avito2024.codenrock.com/api/tenders

Проект можно запустить локально, используя одну из следующих команд:

```flask -A avito run``` или ```python run.py```

```kubectl --kubeconfig=cnrprod1725782375-team-77723.kube.config apply -f deployment.yml```

```kubectl --kubeconfig=cnrprod1725782375-team-77723.kube.config apply -f service.yml```

## Замечания

```app.config['SQLALCHEMY_DATABASE_URI']``` пришлось захардкодить, поскольку по какой-то причине проект ломался при использовании переменных окружения. 

---
Ниже находится содержимое README файла, который был в репозитории с заданием.

---

## Структура проекта

В данном проекте находится типовой пример для сборки приложения в докере из находящящегося в проекте Dockerfile. Пример
на Gradle используется исключительно в качестве шаблона, вы можете переписать проект как вам хочется - главное, что бы
Dockerfile находился в корне проекта и приложение отвечало по порту 8080. Других требований нет.

## Задание

В папке "задание" размещена задача.

## Сбор и развертывание приложения

Приложение должно отвечать по порту `8080` (жестко задано в настройках деплоя). После деплоя оно будет доступно по
адресу: `https://<имя_проекта>-<уникальный_идентификатор_группы_группы>.avito2024.codenrock.com`

Пример: Для кода из репозитория `/avito2024/cnrprod-team-27437/task1` сформируется домен

```
task1-5447.avito2024.codenrock.com
```

**Для удобства домен указывается в логе сборки**

Логи сборки проекта находятся на вкладке **CI/CD** -> **Jobs**.

Ссылка на собранный проект находится на вкладке **Deployments** -> **Environment**. Вы можете сразу открыть URL по
кнопке "Open".

## Доступ к сервисам

### Kubernetes

На вашу команду выделен kubernetes namespace. Для подключения к нему используйте утилиту `kubectl` и `*.kube.config`
файл, который вам выдадут организаторы.

Состояние namespace, работающие pods и логи приложений можно посмотреть по
адресу [https://dashboard.avito2024.codenrock.com/](https://dashboard.avito2024.codenrock.com/). Для открытия дашборда
необходимо выбрать авторизацию через Kubeconfig и указать путь до выданного вам `*.kube.config` файла



